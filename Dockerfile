FROM node:alpine

ARG PROTOCOL
ARG HOST
ARG PORT
ARG API_VERSION

ENV REACT_APP_PROTOCOL=$PROTOCOL
ENV REACT_APP_HOST=$HOST
ENV REACT_APP_PORT=$PORT
ENV REACT_APP_API_VERSION=$API_VERSION

WORKDIR /library

COPY ./package.json yarn.lock /library/

RUN yarn install

COPY . .

EXPOSE 3000

CMD ["yarn", "start"]